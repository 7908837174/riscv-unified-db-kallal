# Copyright (c) Qualcomm Technologies, Inc. and/or its subsidiaries.
# SPDX-License-Identifier: BSD-3-Clause-Clear

# yaml-language-server: $schema=../../schemas/proc_cert_model_schema.json

$schema: proc_cert_model_schema.json#
kind: processor certificate model
name: MockProcessor
long_name: Mock Processor Certificate Model Long Name
class:
  $ref: proc_cert_class/MockProcessor.yaml#

  # MXLEN used by rakefile
base: 64

in_scope_priv_modes:
  - M

# Semantic versions within the model
versions:
  - version: "1.0.0"
  - version: "1.1.0"

revision_history:
  - revision: "0.1.0"
    date: "2024-10-04"
    changes:
      - Created to test CRDs
  - revision: "0.2.0"
    date: "2024-10-05"
    changes:
      - Also created to test CRDs

introduction: |
  Mock Certificate Model introduction:

  * Hello
  * Bob!

# Specification versions
tsc_profile_release:
  $ref: profile_release/Mock.yaml#
unpriv_isa_manual_revision: "20191213"
priv_isa_manual_revision: "20190608-Priv-MSU-Ratified"
debug_manual_revision: "0.13.2"

# XXX - Remove version information since specifying priv/unpriv ISA manual should imply this.
extensions:
  - name: "I"
    version: "~> 2.1"
    presence: mandatory
  - name: "C"
    version: "~> 2.0"
    presence: mandatory
  - name: "M"
    version: "~> 2.0"
    presence: mandatory
  - name: "Zicsr"
    version: "~> 2.0"
    presence: mandatory
  - name: "Zicntr"
    version: "~> 2.0"
    presence: mandatory
    param_constraints:
      - name: "TIME_CSR_IMPLEMENTED"
        # Unconstrained
  - name: "Sm"
    version: "~> 1.11"
    presence: mandatory
    param_constraints:
      - name: "MTVEC_BASE_ALIGNMENT_DIRECT"
        # Unconstrained
      - name: "MTVEC_BASE_ALIGNMENT_VECTORED"
        # Unconstrained
      - name: "ARCH_ID"
        # Unconstrained
      - name: "IMP_ID"
        # Unconstrained
      - name: "VENDOR_ID_BANK"
        # Unconstrained
      - name: "VENDOR_ID_OFFSET"
        # Unconstrained
      - name: "MISA_CSR_IMPLEMENTED"
        # Unconstrained
      - name: "MTVAL_WIDTH"
        # Unconstrained
      - name: "MTVEC_MODES"
        note: Here's a note for MTVEC_MODES parameter.
        schema:
          contains: { const: 0 }
      - name: "PHYS_ADDR_WIDTH"
        # Unconstrained
      - name: "PRECISE_SYNCHRONOUS_EXCEPTIONS"
        schema:
          const: true
      - name: "TRAP_ON_ECALL_FROM_M"
        schema:
          const: true
      - name: "TRAP_ON_EBREAK"
        schema:
          const: true
      - name: "REPORT_VA_IN_MTVAL_ON_BREAKPOINT"
        schema:
          const: true
      - name: "REPORT_VA_IN_MTVAL_ON_INSTRUCTION_ACCESS_FAULT"
        schema:
          const: true
      - name: "REPORT_VA_IN_MTVAL_ON_LOAD_ACCESS_FAULT"
        schema:
          const: true
      - name: "REPORT_VA_IN_MTVAL_ON_STORE_AMO_ACCESS_FAULT"
        schema:
          const: true
      - name: "REPORT_ENCODING_IN_MTVAL_ON_ILLEGAL_INSTRUCTION"
        schema:
          const: true
      - name: "M_MODE_ENDIANNESS"
        schema:
          const: little
        # TODO: Uncomment when GitHub issue # is fixed.
        #schema:
        #- when:
        #    version: "=1.0.0"
        #    then:
        #      const: little
        #- when:
        #    version: "=1.1.0"
        #    then:
        #      enum: [little, big]
      - name: "MXLEN"
        schema:
          const: 64
      - name: "CONFIG_PTR_ADDRESS"
        schema:
          const: 0xdeadbeef
        note: "This parameter and its associated CSR shouldn't be here. See GitHub issue #53."
  - name: "Zifencei"
    presence: optional
    note: "Here's a note for Zifencei"
  - name: "Zicbop"
    presence: optional
    note: "Testing CACHE_BLOCK_SIZE parameter which is also defined by Zicbom."
    param_constraints:
      - name: "CACHE_BLOCK_SIZE"
        schema:
          const: 64
  - name: "Zicbom"
    presence: optional
    note: "Testing CACHE_BLOCK_SIZE parameter which is also defined by Zicbop."
    param_constraints:
      - name: "CACHE_BLOCK_SIZE"
        schema:
          const: 64
  - name: "B"
    presence: mandatory
    version: "~> 1.0"
    note: "Added this as mandatory to see if Zba, Zbb, and Zbs are included."

requirement_groups:
  any_xlen:
    name: Req-Grp-Any-MXLEN
    description: |
      A bunch of additional requirements not associated with an extension.
    requirements:
      - name: REQ-ANY-MXLEN-001
        description: Must pay your taxes on time
      - name: REQ-ANY-MXLEN-002
        description: Don't count your chickens before they're hatched!
  xlen32:
    name: Req-Grp-XLEN32
    when:
      xlen: 32
    description: |
      A bunch of additional requirements only that should show up for MXLEN=32
    requirements:
      - name: REQ-XLEN32-001
        description: Need lots of extra CSRs with `h` suffix
  xlen64:
    name: Req-Grp-XLEN64
    when:
      xlen: 64
    description: |
      A bunch of additional requirements only that should show up for MXLEN=64
    requirements:
      - name: REQ-XLEN64-001
        description: Can avoid adding extra CSRs with `h` suffix
extra_notes:
  - presence: optional
    text: Here's the first extra note for the optional extensions section.
  - presence: mandatory
    text: |
      Here's the first extra note for the mandatory extensions section.
      This note is multiple lines.
  - presence: optional
    text: Here's the second extra note for the optional extensions section.
recommendations:
  - text: |
      Implementations are strongly recommended to raise illegal-instruction
      exceptions on attempts to execute unimplemented opcodes.
  - text: Micky should give Pluto an extra treat
