# yaml-language-server: $schema=../../schemas/csr_schema.json

# <% raise "'hpm_num' must be defined" if hpm_num.nil? %>

<%= "mhpmcounter#{hpm_num}h" %>:
  long_name: Machine Hardware Performance Counter <%= hpm_num %>, Upper half
  address: <%= "0x" + (0xB80 + hpm_num).to_s(16).upcase %>
  priv_mode: M
  length: 32
  base: 32
  description: |
    Upper half of mhpmcounter<%= hpm_num %>.
  definedBy: I
  fields:
    COUNT:
      location: 32-0
      alias: mhpmcounter.COUNT<%= hpm_num %>[63:32]
      description: |
        Upper bits of counter.
      <%- if (NUM_HPM_COUNTERS > (hpm_num - 3)) -%>
      type: RW
      reset_value: UNDEFINED_LEGAL
      <%- else -%>
      type: RO
      reset_value: 0
      <%- end -%>
